#!/usr/bin/env bash

export JAVA_HOME=/usr/lib/jvm/java-{{ java_version }}-openjdk
export SPARK_HOME={{ spark_home }}
export SPARK_CONF_DIR={{ spark_home }}/conf
export SPARK_LOG_DIR={{ spark_home }}/logs
export SPARK_WORKER_DIR={{ spark_home }}/work
export SPARK_LOCAL_DIRS={{ spark_home }}/tmp

{% if 'spark_master' in group_names %}
export SPARK_MASTER_HOST={{ ansible_host }}
export SPARK_MASTER_PORT={{ spark_master_port }}
export SPARK_MASTER_WEBUI_PORT={{ spark_master_webui_port }}
{% endif %}

{% if 'spark_workers' in group_names %}
export SPARK_WORKER_CORES={{ spark_worker_cores }}
export SPARK_WORKER_MEMORY={{ spark_worker_memory }}
export SPARK_WORKER_INSTANCES={{ spark_worker_instances }}
{% endif %}
